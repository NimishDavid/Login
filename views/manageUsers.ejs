<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Add Users</title>
        <style media="screen">
        </style>
        <script src="/jquery.min.js" charset="utf-8"></script>
        <script src="/validator.js" charset="utf-8"></script>
        <link rel="stylesheet" href="/style/addUser.css">
    </head>
    <body>
        <% include navbar %>
        <div class="container">
        <% if(typeof(msg) != 'undefined') { %>
            <%if(msg == 'successAdd') {%>
                <div class="alert alert-success alert-dismissable fade in col-sm-8 col-sm-offset-2">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>Success!</strong>&nbspNew user added.
                </div>
            <% } else if((msg == 'failAdd') || (msg == 'failRem')) {%>
                <div class="alert alert-danger alert-dismissable fade in col-sm-8 col-sm-offset-2">
                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                    <strong>Error!</strong>&nbspOperation failed.
                </div>
            <% } else if(msg == 'successRem') { %>
              <div class="alert alert-success alert-dismissable fade in col-sm-8 col-sm-offset-2">
                  <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                  <strong>Success!</strong>&nbspUser removed.
              </div>
            <% } %>
        <% } %>
    <div class="row">
        <div class="col-sm-8 col-sm-offset-2">
            <div class="panel panel-primary resp adduser_panel">
                <div class="panel-heading">
                    <h3 class="panel-title">Add user</h3>
                </div>
                <div class="panel-body">
                    <form action="/admin/manageUsers/addUser" method="post" class="form" role="form" data-toggle="validator">
                    <div class="row">
                        <div class="col-sm-6 form-group">
                            <label>Name</label>
                            <input class="form-control" name="name" placeholder="Name" type="text" pattern="^[a-zA-Z\s]+$"
                                required autofocus />
                            <div class="help-block with-errors">Only alphabets</div>
                        </div>
                        <div class="col-sm-3 form-group">
                            <label>Employee ID</label>
                            <input class="form-control" name="employee_id" id="employee_id" placeholder="Employee ID" type="text" pattern="^[0-9]{3}$" maxlength= "3" data-remote="/admin/checkUser" required />
                            <div class="help-block with-errors">3 Digit number</div>
                        </div>
                        <div class="col-sm-3 form-group">
                            <label>Employee Type</label>
                            <select class="form-control" name="employee_type" required>
                                <option value="">Select employee type</option>
                                <option value="0">Admin</option>
                                <option value="1">Tester</option>
                                <option value="2">Developer</option>
                            </select>
                            <div class="help-block with-errors"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Email</label>
                                <input class="form-control" name="email" placeholder="Email" type="email" required/>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Password</label>
                                <input class="form-control" name="password" id= "password" placeholder="New Password" type="password" data-minlength="6" required/>
                                <div class="help-block with-errors">Minimum 6 characters</div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="form-group">
                                <label>Re enter password</label>
                                <input class="form-control" name="passwordre" placeholder="Re-enter Password" type="password" data-match="#password" required/>
                                <div class="help-block with-errors"></div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-md btn-success" type="submit">Add User</button>
                    <input class="btn btn-danger" type="reset" value="Reset">
                    </form>
                </div>
            </div>

            <div class="panel panel-primary resp">
                <div class="panel-heading">
                  <h3 class="panel-title">Remove Users</h3>
                </div>
                <div class="panel-body fixed-panel remove_panel">
                  <div class="col-md-12">
                    <div class="col-md-1"><input type="checkbox" name="users" value= "" disabled></div>
                    <div class="col-md-3"><strong><p>User Name</p></strong></div>
                  </div>
                    <form class="" action="/admin/manageUsers/removeUsers" method="post" onsubmit="return confirm('Do you really want to remove the users(s)?');">
                    <div id="usersRemove">
                    <% if(typeof(users) != 'undefined') { %>
                      <% users.forEach(function(item, index) {%>
                        <div class="col-sm-12">
                            <div class="col-sm-1">
                                <label>
                                    <input type="checkbox" name="users[]" value= "<%= item.id %>">
                                </label>
                            </div>
                          <div class="col-sm-3">
                              <p> <%= item.name %> </p>
                          </div>
                        </div>
                      <% }); %>
                  <% } %>
                </div>
                  <div class="row">
                    <div class="col-sm-1 form-group col-sm-offset-10 ">
                        <input type="submit" class="btn btn-md btn-primary checkBtn" value="Remove">
                    </div>
                  </div>
                  </form>
                </div>
            </div>

        </div>

    </div>
    </div>
<script src="/axios.min.js" charset="utf-8"></script>
<script src="/checkboxValidateUser.js"></script>
    </body>
</html>
